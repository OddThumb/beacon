% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/OSC.R
\name{download_event}
\alias{download_event}
\title{Download dataset/strain-file for a GWOSC event (robust v2 logic)}
\usage{
download_event(
  event_name,
  det,
  path = ".",
  file.format = "hdf5",
  timeout = 300,
  load = FALSE,
  remove = FALSE,
  verbose = TRUE
)
}
\arguments{
\item{event_name}{Character. GWOSC event name, e.g. "GW150914".}

\item{det}{Character. Detector name, e.g. "H1".}

\item{path}{Character. Directory to save file (created if missing).}

\item{file.format}{Character. "hdf5" (default), "gwf", or "txt".}

\item{timeout}{Integer. Download timeout seconds (default 300).}

\item{load}{Logical. If TRUE and hdf5, load file as `ts` and return it.}

\item{remove}{Logical. If load=TRUE and remove=TRUE, delete file after loading.}

\item{verbose}{Logical. Print progress messages.}
}
\value{
If load=FALSE, normalized path to downloaded file. If load=TRUE, a `ts` object.
}
\description{
For a given GW event name (e.g. "GW150914") and detector (e.g. "H1"),
try several GWOSC v2 endpoints in a sensible order to locate a matching
strain-file URL and download it.
}
\details{
The function attempts (in order):
 1. /api/v2/events/<EVENT>/strain-files
 2. /api/v2/events/<EVENT> -> choose latest version -> /event-versions/<EVENT>-vN/strain-files
 3. /api/v2/event-versions/<EVENT>/dataset  -> use dataset$strain_files_url

It filters candidates by detector and file.format and chooses the best match
(nearest gps_start when available). If load=TRUE and the file is HDF5, the
function returns a `ts` object (and optionally removes the file).
}
