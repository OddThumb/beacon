% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/Pipe.R
\name{iqr2}
\alias{iqr2}
\title{Identify outliers using robust IQR method}
\usage{
iqr2(x, alpha = 0.05, max_anoms = 0.2, verbose = FALSE)
}
\arguments{
\item{x}{A numeric vector.}

\item{alpha}{A numeric (default: 0.05). Controls the sensitivity of outlier detection. Smaller values yield broader thresholds.}

\item{max_anoms}{A numeric between 0 and 1 (default: 0.2). Maximum fraction of data points to be flagged as outliers.}

\item{verbose}{Logical (default: \code{FALSE}). If \code{TRUE}, returns a detailed outlier report; otherwise returns a binary vector.}
}
\value{
If \code{verbose = FALSE}, returns an integer vector of 0s and 1s (same length as \code{x}), where 1 indicates an outlier.

If \code{verbose = TRUE}, returns a list with the following elements:
\describe{
  \item{\code{outlier}}{Binary vector of outlier flags (1 = outlier).}
  \item{\code{outlier_idx}}{Indices of detected outliers.}
  \item{\code{outlier_vals}}{Values of detected outliers.}
  \item{\code{outlier_direction}}{Direction of anomaly ("Up" or "Down").}
  \item{\code{critical_limits}}{Named vector with lower and upper bounds used for outlier detection.}
  \item{\code{outlier_report}}{Tibble containing values, limits, and direction annotations.}
}
}
\description{
Detects anomalous observations in a numeric vector using an IQR-based rule with enhanced robustness and
optional verbose reporting. The cutoff threshold is scaled by a tunable factor \eqn{(0.15/\alpha)}.
}
\details{
This function is based on the IQR-based approach used in \pkg{anomalize}, but modifies the output to return binary flags
(1 = outlier, 0 = normal) instead of string labels ("Yes", "No"). It also removes the dependency on pipe operators and
expresses the logic using explicit data manipulation functions for clarity and standalone usage.

The detection threshold is defined as:
\deqn{[Q1 - (0.15 / \alpha) \cdot IQR, \; Q3 + (0.15 / \alpha) \cdot IQR]}
where \code{IQR = Q3 - Q1}. Among points beyond this range, only the top \code{max_anoms Ã— length(x)} are retained
based on their magnitude of deviation.
}
\references{
This implementation is adapted from the \code{anomalize::iqr()} function:
\url{https://business-science.github.io/anomalize/index.html}
}
