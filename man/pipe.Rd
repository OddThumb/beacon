% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/Pipe.R
\name{pipe}
\alias{pipe}
\title{Main anomaly detection pipeline for a single detector}
\usage{
pipe(curr_batch, prev_batch, res.list, arch_params, verb = T)
}
\arguments{
\item{curr_batch}{A `ts` object representing the current batch of data.}

\item{prev_batch}{A `ts` object from the previous batch; used for boundary-aware processing.}

\item{res.list}{A named list containing results so far, typically from `init_pipe()`.}

\item{arch_params}{A named list or Rist containing architecture-related parameters:
\describe{
  \item{arch}{Main detection function for the pipeline.}
  \item{n_missed}{List with `Mh` and `Mt`, specifying how many points to include before and after.}
  \item{DQ}{Optional. DQ flag to include, e.g., `"BURST_CAT2"`.}
  \item{P_update}{Optional. Threshold for P0 filtering in update logic.}
}}

\item{verb}{Logical; if `TRUE`, prints progress messages.}
}
\value{
An updated `res.list` with fields:
  \item{proc}{Processed dataframe for the current batch.}
  \item{stat}{Current batch statistics.}
  \item{lamb}{Lambda estimates (a, c) after update.}
  \item{ustat}{Updated cumulative statistics including `last_tcen`.}
}
\description{
This function processes one batch of time-series data for a single detector using a
specified architecture and updates accumulated statistics over batches.
}
\details{
The pipeline includes:
\itemize{
  \item Concatenating previous and current batches
  \item Running the detection algorithm (`arch`)
  \item Filtering and aligning results with the current batch
  \item Adding DQ flags and computing anomaly statistics
  \item Computing significance probabilities (Poisson, Exponential, P0)
  \item Updating cumulative statistics across batches
}
}
\examples{
\dontrun{
# Assume you have curr_batch and prev_batch as ts objects
dets <- c("H1", "L1")
arch_params <- config_pipe()
init <- init_pipe(dets = dets)
prev_batch <- init[[1]]
res.net <- init[[2]]

result <- pipe(curr_batch, prev_batch[["H1"]], res.net[["H1"]], arch_params)
}
}
