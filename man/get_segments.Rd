% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/OSC.R
\name{get_segments}
\alias{get_segments}
\title{Retrieve strain-file metadata from GWOSC (API v2)}
\usage{
get_segments(
  obsrun,
  detector,
  GPSstart,
  GPSend,
  sampling.freq = 4096,
  dur = 4096,
  file.format = "hdf5",
  duty.cycle.lwr = 95
)
}
\arguments{
\item{obsrun}{Character. Observation run name (e.g. \code{"O1"}). This value
is used for informative messages and does not affect server-side filtering.}

\item{detector}{Character vector. One or more detector names (e.g.
\code{c("H1", "L1")}).}

\item{GPSstart}{Integer. Start time in GPS seconds.}

\item{GPSend}{Integer. End time in GPS seconds. If omitted, defaults to
\code{GPSstart + dur}.}

\item{sampling.freq}{Integer (default 4096). Sampling frequency in Hz. Only
4096 (≈4 kHz) and 16384 (≈16 kHz) are supported because the API expects a
sample-rate in kHz (4 or 16).}

\item{dur}{Integer (default 4096). Requested segment duration in seconds.}

\item{file.format}{Character (default \code{"hdf5"}). Desired file format;
typical values are \code{"hdf5"} or \code{"gwf"}.}

\item{duty.cycle.lwr}{Numeric (default 95). NOTE: the \code{/strain-files}
endpoint does **not** provide a \code{duty_cycle} field. This argument is
accepted for compatibility with earlier code, but is ignored by the API
query; see \code{Details} for how to perform timeline-based duty-cycle
filtering if you need it.}
}
\value{
A data.frame with one row per matching file and columns including
  \code{GPSstart} (integer), \code{utc_start} (ISO string or NA),
  \code{detector}, \code{sample_rate_kHz}, \code{url} (download URL),
  \code{detail_url} (if provided by the API), and \code{duration}.
}
\description{
Query GWOSC's v2 \code{/strain-files} endpoint and return a tidy data.frame
describing available strain files that match the supplied criteria.
}
\details{
This function is designed to be used as part of a simple workflow:
\code{list_obsrun()} → \code{list_detector()} → \code{get_segments()} →
\code{download_segments()}. You may pass multiple detectors (e.g.
\code{c("H1", "L1")}) and the function will query each detector and merge the
results.


The API v2 \code{/strain-files} endpoint is queried for each detector in
\code{detector}, and the per-detector results are combined. Because the
server response does not include duty-cycle information, the function cannot
filter by \code{duty_cycle} directly. If you require duty-cycle based
filtering, retrieve timeline/segment information from the timeline segments
endpoints and post-filter the returned file list (this is more advanced and
not performed automatically by this helper).
}
\examples{
\dontrun{
# Discover a run + detectors, then get files
runs <- list_obsrun()
dets <- list_detector("O1")
files <- get_segments("O1", dets, GPSstart = 1126051217, GPSend = 1126051217 + 86400)
head(files)
}

}
\references{
\url{https://gwosc.org/api/}
}
\seealso{
\code{\link{list_obsrun}}, \code{\link{list_detector}},
  \code{\link{download_segments}}
}
